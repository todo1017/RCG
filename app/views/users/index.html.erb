<p id="notice"><%= notice %></p>

<h3>User Approvals for <%= current_user.owner.name %></h3>

<i>When new users create an account (and select an Owner), they will need approval to actually start seeing that owner's buildings -- <b>however, I have not yet restricted access based on the value of this field</b></i>
<br>
<br>

<table>
  <thead>
  <tr>
    <th>Email</th>
    <th></th>
    <th></th>
    <th>Super Admin</th>
    <th>Owner Admin</th>
    <th>Geographies</th>
  </tr>
  </thead>

  <tbody>
  <% @users.each do |user| %>
      <tr>
        <td><%= user.email %></td>
        <td><%= if user.approved == true then raw "<i>Approved</i>" end %></td>
        <td><%= link_to 'Change...', edit_user_path(user) %></td>
        <td>
          <% if user.super_admin? %>
              <%= form_for(user, :url => toggle_super_admin_user_path(user), :html => {:method => :post} ) do |f| %>
                  <%= f.submit "Take away Super Admin" %>
              <% end %>
          <% else %>
              <%= form_for(user, :url => toggle_super_admin_user_path(user), :html => {:method => :post} ) do |f| %>
                  <%= f.submit "Give Super Admin" %>
              <% end %>
          <% end %>
        </td>
        <td>
          <% if user.owner_admin? %>
              <%= form_for(user, :url => toggle_owner_admin_user_path(user), :html => {:method => :post} ) do |f| %>
                  <%= f.submit "Take away Owner Admin" %>
              <% end %>
          <% else %>
              <%= form_for(user, :url => toggle_owner_admin_user_path(user), :html => {:method => :post} ) do |f| %>
                  <%= f.submit "Give Owner Admin" %>
              <% end %>
          <% end %>

        </td>
        <td><%= link_to 'Permissions...', "/geographies/user/#{user.id}" %></td>
      </tr>
  <% end %>
  </tbody>
</table>

<br>
<%= link_to 'Back', root_path %>
